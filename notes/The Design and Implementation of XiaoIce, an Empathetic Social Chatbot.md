### key points

#### General Chat/Domain Chats

##### response candidate retrieval/generation (generators)

+ retrieval - paired data

  Lucene

  keyword search and semantic search

  + paper:

    Learning distributed representations of data in community question answering for question retrieval. ACM 2016

    Ranking responses oriented to conversational relevance in chat-bots. COLING 2016

  Advantage: the retrieval-based provides high-quality responses for popular topics

+ retrieval - unpaired data

  Lucene

  Resort to a <u>knowledge graph (KG)</u> for query expansion (Only if the number of conversation pairs in the paired dataset where **head** occurs in query and **tail** in response, or vise verse, is larger than <u>a pre-set threshold</u>).

  1. **topic** identification (contextual user query)

  2. query expansion (using KG retrieve up to n most related topics, These topics are scored by their relevance using a boosted tree ranker[1] trained on manually labeled training data.)

  3. form a query by combines the query topics and their related topics to retrieve from document (sentences) as response candidates.

  KG - a collection of **(head, relation, tail)** triples.

  + paper:

    [1] Adapting boosting for information retrieval measures. 2010

  Advantage: It can cover a much broader range of topics, and responses are much longer with more useful content. **KG can be viewed as an topic manager!**

+ generation

  the sequence-to-sequence (seq2seq) framework used for conversation response generation

  + paper:

    ...

  Advantage: the generation-based offers robustness and high coverage

##### response candidate ranking

+ threshold

  The response candidates generated by three generators are aggregated and ranked using a boosted tree ranker [1]. A response is selected by randomly sampling a candidate from those with higher ranking scores than <u>a pre-set threshold</u>.

+ a ranking score based on four categories of features:

  Local **cohesion** features (DSSMs) - (modeling query and candidate response)

  Global **coherence** features (DSSMs) - (modeling query and candidate response)

  Empathy matching features

  Retrieval matching features (word level, such as BM25 and TFIDF scores, semantic level, such as DSSM scores)

+ paper:

  DSSMs...

  [1] Adapting boosting for information retrieval measures. 2010

#### Dialogue Manager

Dialogue Manager is the central controller of the dialogue system.

##### Global State Tracker

Global State Tracker that is responsible for keeping track of the current dialogue state $s$.

user utterance, XiaoIce's response, entities, empathy labels

question: <br>what information is necessary to be encoded into dialogue state vector $s$?

##### Dialogue Policy

Dialogue Policy $π$ that selects an action based on the dialogue state as $a = π(s)$. The action can be either a skill or Core Chat activated by the top-level policy (it manages <u>the overall conversation</u>) to respond to the user’s specific request, or a response suggested by a skill-specific low-level policy (it manages <u>the conversation segment</u>).

The dialogue policy is designed to optimize the long-term user engagement through an iterative, trial-and-error process based on the feedback of XiaoIce’s users. It works as follows.

+ If the user input is text (including speech-converted text) only, Core Chat is activated. Topic Manager is designed to manage <u>the dialogue segment</u> of Core Chat by deciding whether to switch to a new topic or switch from General Chat to a specific Domain Chat if a user interest is detected.

+ If the user input is an image or a video clip, the Image Commenting skill is activated.
+ The skills of Task Completion, Deep Engagement and Content Creation are triggered by specific user inputs and conversation context. ...



##### Topic Manager

It consists of **a classifier** for deciding at each dialogue turn whether or not to switch topics, and **a topic retrieval engine** for recommending a new topic.

When topic switching is triggered, a list of topic candidates is retrieved from the dataset using the current dialogue state as query. The new topic is chosen by a machine-learned boosted tree ranker based on the following features:

Contextual relevance

Freshness

Personal interests

Popularity

Acceptance rate

#### Hierarchical Decision-Making



#### Personality



#### Evaluate

To evaluate the effectiveness of XiaoIce as an AI companion to human users with emotional connections, we use the metric of CPS which indicates on average users’ willingness to share time with XiaoIce via conversation.

Conversation-turns Per Session (CPS) as the success metric for social chatbots. It is the average number of conversation-turns between the chatbot and the user in a conversational session. The larger the CPS is, the better engaged the social chatbot is.

#### Question

+ 如何计算用户的情感？
+ 



